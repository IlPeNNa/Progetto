<div class="auth-container">
  <!-- Header -->
  <div class="auth-header">
    <div class="header-left">
      <img src="mybills.ico" alt="MyBills Logo" class="auth-logo">
    </div>
    <div class="header-center">
      <p>MyBills</p>
    </div>
    <div class="header-right">
      <!-- Spazio per eventuali elementi futuri -->
    </div>
  </div>

  <!-- Main content -->
  <div class="auth-content">
    <mat-card class="auth-card">
      <mat-card-content>
        <form (ngSubmit)="onSubmit()" #authForm="ngForm" novalidate>
          
          <!-- Campi per la registrazione (nome e cognome) -->
          <div *ngIf="!isLoginMode" class="registration-fields">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Nome</mat-label>
              <input 
                matInput 
                [(ngModel)]="nome" 
                name="nome"
                #nomeField="ngModel"
                required
                autocomplete="given-name">
              <mat-icon matSuffix>person</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Cognome</mat-label>
              <input 
                matInput 
                [(ngModel)]="cognome" 
                name="cognome"
                #cognomeField="ngModel"
                required
                autocomplete="family-name">
              <mat-icon matSuffix>person</mat-icon>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Codice Fiscale</mat-label>
              <input 
                matInput 
                [(ngModel)]="cf" 
                name="cf"
                #cfField="ngModel"
                required
                maxlength="16"
                style="text-transform: uppercase"
                placeholder="Es. RSSMRA80A01H501Z">
              <mat-icon matSuffix>badge</mat-icon>
            </mat-form-field>
          </div>

          <!-- Email field (sempre presente) -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{isLoginMode ? 'Inserisci email' : 'Email'}}</mat-label>
            <input 
              matInput 
              type="email"
              [(ngModel)]="email" 
              name="email"
              #emailField="ngModel"
              required
              pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
              autocomplete="email"
              [matTooltip]="'Formato richiesto: nomecognome@dominio.com/it'"
              matTooltipPosition="above"
              matTooltipShowDelay="300">
            <mat-icon matSuffix>email</mat-icon>
            
            <!-- Messaggi di errore -->
            <mat-error *ngIf="emailField.invalid && (emailField.dirty || emailField.touched)">
              <span *ngIf="emailField.errors?.['required']">*Questo è un campo obbligatorio</span>
              <span *ngIf="emailField.errors?.['pattern']">Inserisci un'email valida (es. nome&#64;dominio.com/it)</span>
            </mat-error>
          </mat-form-field>

          <!-- Password field -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{isLoginMode ? 'Inserisci password' : 'Scegli password'}}</mat-label>
            <input 
              matInput 
              type="password"
              [(ngModel)]="password" 
              name="password"
              #passwordField="ngModel"
              required
              autocomplete="current-password">
            <mat-icon matSuffix>lock</mat-icon>
          </mat-form-field>

          <!-- Messaggio di errore -->
          <div *ngIf="errorMessage" class="error-message">
            <mat-icon>error</mat-icon>
            <span>{{ errorMessage }}</span>
          </div>

          <!-- Buttons -->
          <div class="auth-buttons">
            <button 
              mat-raised-button 
              color="primary" 
              type="submit"
              [disabled]="isLoading || !authForm.form.valid"
              class="auth-button">
              <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
              <span *ngIf="!isLoading">{{isLoginMode ? 'Log in' : 'Registrati'}}</span>
              <span *ngIf="isLoading">{{isLoginMode ? 'Accesso in corso...' : 'Registrazione in corso...'}}</span>
            </button>

            <button 
              mat-raised-button 
              color="accent" 
              type="button"
              [disabled]="isLoading"
              (click)="toggleMode()"
              class="auth-button">
              {{isLoginMode ? 'Registrati' : 'Torna al Login'}}
            </button>
          </div>

        </form>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Footer -->
  <footer class="auth-footer">
    <!-- Anteprima compatta (visibile di default) -->
    <div class="footer-preview">
      <div class="footer-preview-left">
        <div class="footer-logo-section">
          <img src="mybills.ico" alt="MyBills Logo" class="footer-logo">
          <h4>MyBills</h4>
        </div>
        <p>&copy; 2025 - Gestione bollette intelligente</p>
      </div>
      
      <div class="footer-preview-center">
        <div class="preview-sections">
          <span class="preview-section">Servizi</span>
          <span class="preview-section">Supporto</span>
          <span class="preview-section">Azienda</span>
        </div>
      </div>
      
      <div class="footer-preview-right">
        <span>IT | EN</span>
        <div class="expand-hint">
          <span>Hover per maggiori info</span>
          <mat-icon>expand_more</mat-icon>
        </div>
      </div>
    </div>

    <!-- Contenuto completo (visibile al hover) -->
    <div class="footer-content">
      <div class="footer-section">
        <div class="footer-logo-section">
          <img src="mybills.ico" alt="MyBills Logo" class="footer-logo">
          <h4>MyBills</h4>
        </div>
        <p>La soluzione moderna per gestire le tue bollette con semplicità e controllo.</p>
      </div>
      
      <div class="footer-section dropdown-section">
        <div class="section-header">
          <h4>Servizi</h4>
        </div>
        <ul class="dropdown-content">
          <li><a href="#">Gestione Bollette</a></li>
          <li><a href="#">Dashboard Analytics</a></li>
          <li><a href="#">Ricerca Offerte</a></li>
        </ul>
      </div>
      
      <div class="footer-section dropdown-section">
        <div class="section-header">
          <h4>Supporto</h4>
        </div>
        <ul class="dropdown-content">
          <li><a href="#">Centro Assistenza</a></li>
          <li><a href="#">Contattaci</a></li>
          <li><a href="#">Tutorial</a></li>
        </ul>
      </div>
      
      <div class="footer-section dropdown-section">
        <div class="section-header">
          <h4>Azienda</h4>
        </div>
        <ul class="dropdown-content">
          <li><a href="#">Chi Siamo</a></li>
          <li><a href="#">Privacy Policy</a></li>
          <li><a href="#">Termini di Servizio</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-divider"></div>
    
    <div class="footer-bottom">
      <div class="footer-bottom-left">
        <p>&copy; 2025 MyBills. All rights reserved.</p>
        <p class="team-credits">Developed by Matteo Ambonati, Enrico Antiga, Alex Pennini</p>
      </div>
      
      <div class="footer-bottom-right">
        <div class="social-links">
          <a href="#" aria-label="LinkedIn">
            <mat-icon>business</mat-icon>
          </a>
          <a href="#" aria-label="Twitter">
            <mat-icon>alternate_email</mat-icon>
          </a>
        </div>
        <div class="language-selector">
          <mat-icon>language</mat-icon>
          <span>IT | EN</span>
        </div>
      </div>
    </div>
  </footer>
</div>
